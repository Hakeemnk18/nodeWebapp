<%- include("../partials/admin/header.ejs")%>
<div id="page-wrapper">
   <div class="header">
      <h1 class="page-header">User Management</h1>
      <ol class="breadcrumb">
         <li><a href="/admin/">Dashboard</a></li>
         <li class="active">User Management</li>
      </ol>
   </div>
   <div id="page-inner">
      <div class="row">
         <div class="col-md-12">
            <!-- Advanced Tables -->
            <div class="card">
               <div class="card-action">Users List</div>
               <div class="card-content">
                  <div class="table-responsive">
                     <div class="row">
                        <div class="col-sm-6">
                           <div id="dataTables-example_filte" class="dataTables_filter">
                              <form action="#" method="get">
                                 <label for="s">Search:      </label><input
                                    type="search"
                                    class="form-control input-sm"
                                    aria-controls="dataTables-example"
                                    name="search"
                                    id="search"
                                    />
                                 <input type="submit">
                              </form>
                           </div>
                        </div>
                     </div>
                     <table
                        class="table table-striped table-bordered table-hover"
                        id="dataTables-example"
                        >
                        <thead>
                            <tr>
                                <th>Username</th>
                                <th>Email</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                           <tbody>
                              <% if (typeof data !== 'undefined') { %>
                                 <% for (let i = 0; i < data.length; i++) { %>
                                     <tr class="odd gradeX">
                                         <td><%= data[i].username %></td>
                                         <td><%= data[i].email %></td>
                                         
                                         <td>
                                             
                                             <% if (data[i].isActive === false) { %>
                                                 <button class="btn">
                                                     <a style="text-decoration: none; color: rgb(255, 255, 255);" href="/admin/userManagement/unblock?id=<%= data[i]._id%>&page=<%= currentPage %>">UNBLOCK</a>
                                                 </button>
                                             <% } else { %>
                                                 <button class="btn-danger">
                                                     <a style="text-decoration: none; color: rgb(255, 255, 255);" href="/admin/userManagement/block?id=<%= data[i]._id %>&page=<%= currentPage %>">BLOCK</a>
                                                 </button>
                                             <% } %>
                                         </td>
                                     </tr>
                                 <% } %>
                             <% } %>  
                          </tbody>
                     </table>
                     <ul class="pagination">

                        <% if (hasPrevPage) { %>
                           <li><a href="?page=<%= currentPage - 1 %>">Previous</a></li>
                       <% } else { %>
                           <li class="disabled"><span>Previous</span></li>
                       <% } %>

                        <% for(let i=1; i<=totalPage ; i++){ %>
                           <li class="page-item  <%= currentPage === i ? 'active' : '' %>">
                              <a class="page-link" href="?page=<%= i %>"><%= i %></a>
                          </li>
                        <% } %>

                        <% if (hasNextPage) { %>
                           <li><a href="?page=<%= currentPage + 1 %>">Next</a></li>
                       <% } else { %>
                           <li class="disabled"><span>Previous</span></li>
                       <% } %>
                        
                        
                      </ul>
                  </div>
               </div>
            </div>
            <!--End Advanced Tables -->
         </div>
      </div>
      <%- include("../partials/admin/footer.ejs")%>
   </div>
</div>

<script>
   document.addEventListener('DOMContentLoaded', (event) => {
   const element = document.getElementById('dataTables-example_filter');
   const emptyElements = document.getElementsByClassName('dataTables_empty');
   const removePginat=document.getElementById('dataTables-example_paginate')
   const dataTablesLength=document.getElementById("dataTables-example_length")
   const dataTablesInfo=document.getElementById("dataTables-example_info")
    while (emptyElements.length > 0) {
        emptyElements[0].remove();
    }
    
    if (element || removePginat || dataTablesLength || dataTablesInfo) {
                element.remove();
                removePginat.remove()
                dataTablesLength.remove()
                dataTablesInfo.remove()
            }
   });
</script>
           