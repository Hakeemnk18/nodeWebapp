<%- include("../partials/admin/header.ejs") %>
<div id="page-wrapper">
   <div class="header">
      <h1 class="page-header">Coupon Management</h1>
      <ol class="breadcrumb">
         <li><a href="/admin/">Dashboard</a></li>
         <li class="active">Coupon Management</li>
      </ol>
   </div>
   <div id="page-inner">
      <div class="row">
         <div class="col-md-12">
            <!-- Advanced Tables -->
            <div class="card">
               <div class="card-action">Category List</div>
               <div class="card-content">
                  <div class="table-responsive">
                     <div class="row">
                        <div class="col-sm-6">
                           <div id="dataTables-example_filte" class="dataTables_filter">
                              <form action="#" method="get">
                                 <label for="s">Search:</label>
                                 <input
                                    type="search"
                                    class="form-control input-sm"
                                    aria-controls="dataTables-example"
                                    name="search"
                                    id="search"
                                 />
                                 <input type="submit" value="Search">
                              </form>
                           </div>
                        </div>
                     </div>
                     <table
                        class="table table-striped table-bordered table-hover"
                        id="dataTables-example"
                     >
                        <thead>
                            <tr>
                                <th>Coupon Code</th>
                                <th>Discount</th>
                                <th>Minimum Amount</th>
                                <th>Coupon Type</th>
                                <th></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                           <% if(typeof allCoupon !== 'undefined'){ %>
                              <% for(let i = 0 ; i < allCoupon.length ; i++){ %>
                                 <tr class="odd gradeX">
                                    <td><%= allCoupon[i].code %></td>
                                    <td><%= allCoupon[i].discoundValue %></td>
                                    <td><%= allCoupon[i].minCartValue %></td>
                                    <td><%= allCoupon[i].discountType %></td>
                                    <td><a href="/admin/coupon/addCoupon/editCoupon?id=<%= allCoupon[i]._id %>"><i class="fa-solid fa-pen-to-square"></i></a></td>
                                    
                                    <% if(allCoupon[i].isActive === true){ %>
                                       <td><a href="/admin/coupon/addCoupon/block?id=<%= allCoupon[i]._id %>"><i class="fa-solid fa-lock"></i></a></td>
                                    <% } else{ %>
                                       <td><a href="/admin/coupon/addCoupon/unBlock?id=<%= allCoupon[i]._id %>"><i class="fa-solid fa-lock-open"></i></a></td>
                                   <% } %>
                                    
                                </tr>
                              <% } %>
                           <% } %>
                           
                           
                           
                        </tbody>
                     </table>
                     <div class="col-8">
                        <ul class="pagination">
                           <li class="disabled"><span>Previous</span></li>
                           <li class="active"><a href="#">1</a></li>
                           <li><a href="#">2</a></li>
                           <li><a href="#">3</a></li>
                           <li><a href="#">Next</a></li>
                        </ul>
                     </div>
                     <div style="margin-bottom: 20px;" class="col">
                        <button class="btn btn-success"><a href="/admin/coupon/addCoupon" style="color: black;">Add Coupon</a></button>
                     </div>
                  </div>
               </div>
            </div>
            <!--End Advanced Tables -->
         </div>
      </div>
   </div>
</div>

<%- include("../partials/admin/footer.ejs") %>

      

      
      <script>
         document.addEventListener('DOMContentLoaded', (event) => {
         const element = document.getElementById('dataTables-example_filter');
         const emptyElements = document.getElementsByClassName('dataTables_empty');
         const removePginat=document.getElementById('dataTables-example_paginate')
         const dataTablesLength=document.getElementById("dataTables-example_length")
         const dataTablesInfo=document.getElementById("dataTables-example_info")
          while (emptyElements.length > 0) {
              emptyElements[0].remove();
          }
          
          if (element || removePginat || dataTablesLength || dataTablesInfo) {
                      element.remove();
                      removePginat.remove()
                      dataTablesLength.remove()
                      dataTablesInfo.remove()
                  }
         });
      </script>
      
   </div>
</div>
       



